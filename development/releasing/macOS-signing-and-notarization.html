<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>macOS signing and notarization &#8212; SuperCollider Wiki  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=4f649999" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=039e1c02" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=7d9986eb" />
    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Reviewing" href="../reviewing/index.html" />
    <link rel="prev" title="Releasing cycle and process" href="Releasing-cycle-and-process.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="macos-signing-and-notarization">
<h1>macOS signing and notarization<a class="headerlink" href="#macos-signing-and-notarization" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="content">
<p class="topic-title">Content</p>
<ul class="simple">
<li><p><a class="reference internal" href="#signing-and-notarizing-a-single-plugin-file" id="id1">Signing and notarizing a single plugin file</a></p></li>
<li><p><a class="reference internal" href="#signing-and-notarizing-supercollider" id="id2">Signing and notarizing SuperCollider</a></p></li>
<li><p><a class="reference internal" href="#entitlement-files" id="id3">Entitlement files</a></p></li>
</ul>
</nav>
<p>First, you’ll need a signing cert. With Apple binaries, this means using a Developer account to create a Developer ID, and creating a signing cert with Keychain.</p>
<section id="signing-and-notarizing-a-single-plugin-file">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Signing and notarizing a single plugin file</a><a class="headerlink" href="#signing-and-notarizing-a-single-plugin-file" title="Link to this heading">¶</a></h2>
<p>To sign a single binary for a Plugin.scx file, you just need to sign the scx file itself, using the entitlements that come in the SuperCollider.app bundle. From Terminal, move into the SuperCollider directory (that contains SuperCollider.app), and use the command line below against your .scx binary. The last argument in the command is the path to your .scx file, and you’ll need to replace the signing identity with what you have stored in your keychain:</p>
<p><code class="docutils literal notranslate"><span class="pre">codesign</span> <span class="pre">--deep</span> <span class="pre">--force</span> <span class="pre">--verify</span> <span class="pre">--verbose</span> <span class="pre">--timestamp</span> <span class="pre">--entitlements</span> <span class="pre">SuperCollider.app/Contents/entitlements.plist</span> <span class="pre">--sign</span> <span class="pre">“***</span> <span class="pre">your</span> <span class="pre">signing</span> <span class="pre">ID</span> <span class="pre">***”</span> <span class="pre">--options</span> <span class="pre">runtime</span> <span class="pre">***path</span> <span class="pre">to</span> <span class="pre">your</span> <span class="pre">plugin***</span></code></p>
<p>As an example, this would sign a plugin called MyUgen.scx on my Desktop</p>
<p><code class="docutils literal notranslate"><span class="pre">codesign</span> <span class="pre">--deep</span> <span class="pre">--force</span> <span class="pre">--verify</span> <span class="pre">--verbose</span> <span class="pre">--timestamp</span> <span class="pre">--entitlements</span> <span class="pre">SuperCollider.app/Contents/entitlements.plist</span> <span class="pre">--sign</span> <span class="pre">&quot;Developer</span> <span class="pre">ID</span> <span class="pre">Application:</span> <span class="pre">Joshua</span> <span class="pre">Parmenter&quot;</span> <span class="pre">--options</span> <span class="pre">runtime</span> <span class="pre">~/Desktop/MyUgen.scx</span></code></p>
</section>
<section id="signing-and-notarizing-supercollider">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Signing and notarizing SuperCollider</a><a class="headerlink" href="#signing-and-notarizing-supercollider" title="Link to this heading">¶</a></h2>
<p>The process for signing and notarizing SuperCollider is complicated by our usage of Qt binaries, interprocess communications and binary plugins. On a given SuperCollider binary .app bundle, the following commands are used to import entitlements, sign everything (ORDER MATTERS!), zip up the .app bundle, upload to Apple for notarization, stapling the notarization upon success, then finally rezipping the package and singing the .zip file at the end so the download won’t freak out your computer.</p>
<p>I’ll use my signing identity as the example below, but when I get to the notarization step I will remove my personal signing info (a user name and app specific password) for security. The notarization is asynchronous, and can take anywhere from a couple minutes (after upload) to a couple hours to complete.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>path/to/SuperCollider

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Removing Finder cruft...&quot;</span>
xattr<span class="w"> </span>-cr<span class="w"> </span>SuperCollider.app

<span class="c1"># add entitlements to SuperCollider folder, then mv to SuperCollider.app/Contents</span>
<span class="c1"># files are attached on this post, and show them as living on my Desktop</span>

cp<span class="w"> </span>~/Desktop/QtWebEngineProcess.entitlements<span class="w"> </span>SuperCollider.app/Contents/

cp<span class="w"> </span>~/Desktop/entitlements.plist<span class="w"> </span>SuperCollider.app/Contents/

codesign<span class="w"> </span>--deep<span class="w"> </span>--force<span class="w"> </span>--verify<span class="w"> </span>--verbose<span class="w"> </span>--timestamp<span class="w"> </span>--entitlements<span class="w"> </span>SuperCollider.app/Contents/entitlements.plist<span class="w">  </span>--sign<span class="w"> </span><span class="s2">&quot;Developer ID Application: Joshua Parmenter&quot;</span><span class="w"> </span>--options<span class="w"> </span>runtime<span class="w"> </span>SuperCollider.app

codesign<span class="w"> </span>--deep<span class="w"> </span>--force<span class="w"> </span>--verify<span class="w"> </span>--verbose<span class="w"> </span>--timestamp<span class="w"> </span>--sign<span class="w"> </span><span class="s2">&quot;Developer ID Application: Joshua Parmenter&quot;</span><span class="w"> </span>--options<span class="w"> </span>runtime<span class="w"> </span>SuperCollider.app/Contents/Frameworks/QtWebEngineCore.framework/Helpers/QtWebEngineProcess.app/Contents/MacOS/QtWebEngineProcess

codesign<span class="w"> </span>--deep<span class="w"> </span>--force<span class="w"> </span>--verify<span class="w"> </span>--verbose<span class="w"> </span>--timestamp<span class="w"> </span>--entitlements<span class="w"> </span>SuperCollider.app/Contents/entitlements.plist<span class="w"> </span>--sign<span class="w"> </span><span class="s2">&quot;Developer ID Application: Joshua Parmenter&quot;</span><span class="w"> </span>--options<span class="w"> </span>runtime<span class="w"> </span>SuperCollider.app/Contents/Resources/scsynth

codesign<span class="w"> </span>--deep<span class="w"> </span>--force<span class="w"> </span>--verify<span class="w"> </span>--verbose<span class="w"> </span>--timestamp<span class="w"> </span>--entitlements<span class="w"> </span>SuperCollider.app/Contents/entitlements.plist<span class="w"> </span>--sign<span class="w"> </span><span class="s2">&quot;Developer ID Application: Joshua Parmenter&quot;</span><span class="w"> </span>--options<span class="w"> </span>runtime<span class="w"> </span>SuperCollider.app/Contents/Resources/supernova

codesign<span class="w"> </span>--deep<span class="w"> </span>--force<span class="w"> </span>--verify<span class="w"> </span>--verbose<span class="w"> </span>--timestamp<span class="w"> </span>--entitlements<span class="w"> </span>SuperCollider.app/Contents/entitlements.plist<span class="w"> </span>--sign<span class="w"> </span><span class="s2">&quot;Developer ID Application: Joshua Parmenter&quot;</span><span class="w"> </span>--options<span class="w"> </span>runtime<span class="w"> </span>SuperCollider.app/Contents/Resources/plugins/*

<span class="c1">## do the above in SC3Plugins … sign *.scx and */*.scx</span>

codesign<span class="w"> </span>--deep<span class="w"> </span>--force<span class="w"> </span>--verify<span class="w"> </span>--verbose<span class="w"> </span>--timestamp<span class="w"> </span>--entitlements<span class="w"> </span>SuperCollider.app/Contents/entitlements.plist<span class="w"> </span>--sign<span class="w"> </span><span class="s2">&quot;Developer ID Application: Joshua Parmenter&quot;</span><span class="w"> </span>--options<span class="w"> </span>runtime<span class="w"> </span>SuperCollider.app/Contents/MacOS/SuperCollider

codesign<span class="w"> </span>--deep<span class="w"> </span>--force<span class="w"> </span>--verify<span class="w"> </span>--verbose<span class="w"> </span>--timestamp<span class="w"> </span>--sign<span class="w"> </span><span class="s2">&quot;Developer ID Application: Joshua Parmenter&quot;</span><span class="w"> </span>--entitlements<span class="w"> </span>SuperCollider.app/Contents/QtWebEngineProcess.entitlements<span class="w"> </span>--options<span class="w"> </span>runtime<span class="w"> </span>SuperCollider.app/Contents/Frameworks/QtWebEngineCore.framework/Helpers/QtWebEngineProcess.app


ditto<span class="w"> </span>-c<span class="w"> </span>-k<span class="w"> </span>--rsrc<span class="w"> </span>--keepParent<span class="w"> </span>SuperCollider.app<span class="w"> </span>SuperCollider.app.zip


xcrun<span class="w"> </span>altool<span class="w"> </span>--notarize-app<span class="w"> </span>-t<span class="w"> </span>osx<span class="w"> </span>-f<span class="w"> </span>SuperCollider.app.zip<span class="w"> </span>--primary-bundle-id<span class="w"> </span>net.sourceforge.supercollider<span class="w"> </span>-u<span class="w"> </span>YourAppleDevID<span class="w"> </span>-p<span class="w"> </span>YouAppleAppSpecificPassword

<span class="c1"># Notarization-info comes from the above… it is a UUID passed back after the app</span>
<span class="c1"># is uploaded Apple will email you when notarization is completed - OR - take</span>
<span class="c1"># the UUID that comes back and check the status</span>

xcrun<span class="w"> </span>altool<span class="w"> </span>--notarization-info<span class="w"> </span>TheUUID<span class="w"> </span>-u<span class="w"> </span>YourAppleDevID<span class="w"> </span>-p<span class="w"> </span>YouAppleAppSpecificPassword

<span class="c1"># after it is accepted, staple your .app:</span>

xcrun<span class="w"> </span>stapler<span class="w"> </span>staple<span class="w"> </span>SuperCollider.app

<span class="c1"># remove the zip you created, and move one level up</span>

rm<span class="w"> </span>SuperCollider.app.zip
<span class="nb">cd</span><span class="w"> </span>..

<span class="c1"># Now, in Finder, compress the SuperCollider folder to</span>
<span class="c1"># SuperCollider.zip (or whatever you want to name it) then code sign the zip</span>

codesign<span class="w"> </span>--deep<span class="w"> </span>--force<span class="w"> </span>--verify<span class="w"> </span>--verbose<span class="w"> </span>--timestamp<span class="w"> </span>--sign<span class="w"> </span><span class="s2">&quot;Developer ID Application: Joshua Parmenter&quot;</span><span class="w"> </span>SuperCollider.zip
</pre></div>
</div>
</section>
<section id="entitlement-files">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Entitlement files</a><a class="headerlink" href="#entitlement-files" title="Link to this heading">¶</a></h2>
<p>Save this as QtWebEngineProcess.entitlements</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="cp">&lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;</span>
<span class="nt">&lt;plist</span><span class="w"> </span><span class="na">version=</span><span class="s">&quot;1.0&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;dict&gt;</span>
<span class="w">    </span><span class="nt">&lt;key&gt;</span>com.apple.security.cs.disable-executable-page-protection<span class="nt">&lt;/key&gt;</span>
<span class="w">    </span><span class="nt">&lt;true/&gt;</span>
<span class="nt">&lt;/dict&gt;</span>
<span class="nt">&lt;/plist&gt;</span>
</pre></div>
</div>
<p>Save this as entitlements.plist</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="cp">&lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;</span>
<span class="nt">&lt;plist</span><span class="w"> </span><span class="na">version=</span><span class="s">&quot;1.0&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;dict&gt;</span>
<span class="w">	</span><span class="nt">&lt;key&gt;</span>com.apple.security.cs.allow-unsigned-executable-memory<span class="nt">&lt;/key&gt;</span>
<span class="w">	</span><span class="nt">&lt;true/&gt;</span>
<span class="w">	</span><span class="nt">&lt;key&gt;</span>com.apple.security.device.audio-input<span class="nt">&lt;/key&gt;</span>
<span class="w">	</span><span class="nt">&lt;true/&gt;</span>
<span class="w">	</span><span class="nt">&lt;key&gt;</span>com.apple.security.cs.disable-library-validation<span class="nt">&lt;/key&gt;</span>
<span class="w">	</span><span class="nt">&lt;true/&gt;</span>
<span class="w">	</span><span class="nt">&lt;key&gt;</span>com.apple.security.device.microphone<span class="nt">&lt;/key&gt;</span>
<span class="w">	</span><span class="nt">&lt;true/&gt;</span>
<span class="nt">&lt;/dict&gt;</span>
<span class="nt">&lt;/plist&gt;</span>
</pre></div>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.svg" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../../index.html">SuperCollider Wiki</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">Contributing</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Development</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../git/index.html">Git</a></li>
<li class="toctree-l2"><a class="reference internal" href="../meetings/index.html">Meetings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../misc/index.html">Miscellaneous dev notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project-structure/index.html">Project structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../style/index.html">Code style guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../platforms/index.html">Plattforms</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Releasing</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="3.13-Changelog-notes.html">notes for the 3.13 release, to be included in Changelog.md</a></li>
<li class="toctree-l3"><a class="reference internal" href="Releasing-cycle-and-process.html">Releasing cycle and process</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">macOS signing and notarization</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reviewing/index.html">Reviewing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../user/index.html">User resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../community/index.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/index.html">FAQ</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Development</a><ul>
  <li><a href="index.html">Releasing</a><ul>
      <li>Previous: <a href="Releasing-cycle-and-process.html" title="previous chapter">Releasing cycle and process</a></li>
      <li>Next: <a href="../reviewing/index.html" title="next chapter">Reviewing</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2024, SuperCollider.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../_sources/development/releasing/macOS-signing-and-notarization.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>