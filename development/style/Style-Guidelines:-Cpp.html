<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>C++ style guidelines &#8212; SuperCollider Wiki  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=4f649999" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=039e1c02" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=7d9986eb" />
    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="C++ formatting instructions" href="cpp-formatting/Cpp-formatting-instructions.html" />
    <link rel="prev" title="Code style guidelines" href="index.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="c-style-guidelines">
<h1>C++ style guidelines<a class="headerlink" href="#c-style-guidelines" title="Link to this heading">¶</a></h1>
<p>For setup of the C++ formatting also consider the following document.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="cpp-formatting/Cpp-formatting-instructions.html">C++ formatting instructions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cpp-formatting/Cpp-formatting-instructions.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp-formatting/Cpp-formatting-instructions.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp-formatting/Cpp-formatting-instructions.html#getting-started">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp-formatting/Cpp-formatting-instructions.html#working-with-clang-format">Working with clang-format</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp-formatting/Cpp-formatting-instructions.html#working-without-clang-format">Working without clang-format</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp-formatting/Cpp-formatting-instructions.html#what-files-are-actually-linted-formatted">What files are actually linted/formatted?</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp-formatting/Cpp-formatting-instructions.html#i-made-a-pr-before-the-reformat-june-2019-and-it-has-merge-conflicts-now-how-do-i-fix-it">I made a PR before the reformat (June 2019) and it has merge conflicts now! How do I fix it?</a></li>
</ul>
</li>
</ul>
</div>
<hr class="docutils" />
<nav class="contents local" id="content">
<p class="topic-title">Content</p>
<ul class="simple">
<li><p><a class="reference internal" href="#style-guidelines-and-clang-format" id="id1">Style guidelines and <code class="docutils literal notranslate"><span class="pre">clang-format</span></code></a></p></li>
<li><p><a class="reference internal" href="#naming" id="id2">Naming</a></p></li>
<li><p><a class="reference internal" href="#notes-for-ugen-writers" id="id3">Notes for UGen writers</a></p></li>
<li><p><a class="reference internal" href="#lambdas" id="id4">Lambdas</a></p></li>
<li><p><a class="reference internal" href="#indentation" id="id5">Indentation</a></p></li>
<li><p><a class="reference internal" href="#line-breaking" id="id6">Line breaking</a></p></li>
<li><p><a class="reference internal" href="#whitespace" id="id7">Whitespace</a></p></li>
<li><p><a class="reference internal" href="#disabling-automatic-formatting" id="id8">Disabling automatic formatting</a></p></li>
</ul>
</nav>
<!--
Note on revision history: it appears changing the wiki's name obscures the wiki's revision history. Changing the name back to it's previous name then shows the full revision history. hmmm... GitHub bug? If that's needed, this wiki's previous name was "Cpp code style guidelines".
-->
<p>Below the guidelines applying to <em>C++</em> code throughout the SuperCollider project are explained. If you’re familiar with guidelines, you may want to jump straight to the [[Cpp formatting instructions]].</p>
<p>This is a living document reflecting the conventional style used in this project. Each guideline here is presented with a brief discussion including examples, rationale, and importance.</p>
<p>Guidelines are also available for other parts of the project:</p>
<p>[[Style guidelines: SuperCollider]], [[Style guidelines: SCDocs]], [[The wiki wiki]].</p>
<section id="style-guidelines-and-clang-format">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Style guidelines and <code class="docutils literal notranslate"><span class="pre">clang-format</span></code></a><a class="headerlink" href="#style-guidelines-and-clang-format" title="Link to this heading">¶</a></h2>
<p>SuperCollider uses <a class="reference external" href="https://clang.llvm.org/docs/ClangFormat.html">clang-format</a>, an open source C and C++ source code formatting tool, to ensure consistent code style across our code base. So while the following discussion describes the style used in the code, along with some things that can’t be easily automated such as variable naming, for issues of code formatting the output of the <code class="docutils literal notranslate"><span class="pre">clang-format</span></code> tool should be considered canonical style. For more information about using <code class="docutils literal notranslate"><span class="pre">clang-format</span></code> on SuperCollider C++ code see <a class="reference external" href="https://github.com/supercollider/supercollider/wiki/Cpp-formatting-instructions">these instructions</a>.</p>
<p>In general SuperCollider follows the <a class="reference external" href="https://webkit.org/code-style-guidelines/">WebKit Code Style Guidelines</a>, with a few notable exceptions and additions.</p>
</section>
<section id="naming">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Naming</a><a class="headerlink" href="#naming" title="Link to this heading">¶</a></h2>
<p>New code, either in new files or substantial additions to existing files, should follow <a class="reference external" href="https://webkit.org/code-style-guidelines/#names">WebKit</a> guidelines around naming, which has some similarity to SuperCollider language style guidelines. Generally, name things using full words and CamelCase, classes have capitalized first letters, variables and functions do not. Prefix member variables with <code class="docutils literal notranslate"><span class="pre">m_</span></code>, static data members with <code class="docutils literal notranslate"><span class="pre">s_</span></code>, and global variables with <code class="docutils literal notranslate"><span class="pre">g_</span></code>.</p>
<p>Older code used the prefixes <code class="docutils literal notranslate"><span class="pre">k</span></code>, <code class="docutils literal notranslate"><span class="pre">g</span></code>, and <code class="docutils literal notranslate"><span class="pre">m</span></code> to identify constants, global variables, and members respectively. You may see some code that uses the prefix <code class="docutils literal notranslate"><span class="pre">Pyr</span></code>; this refers to the origin of SuperCollider as a Max/MSP object called “Pyrite”.</p>
</section>
<section id="notes-for-ugen-writers">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Notes for UGen writers</a><a class="headerlink" href="#notes-for-ugen-writers" title="Link to this heading">¶</a></h2>
<p>The naming for UGens has fairly strict conventions, because SC’s macros connect the function/struct names with the names used by a user. A UGen usually has a struct associated with it, which should take the same name as the corresponding sclang class (which implies it begins with a capital letter).</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">SinOsc</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Unit</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">};</span>
</pre></div>
</div>
<p>In general the associated methods’ names should begin with that name too: the constructor must take that name followed by _Ctor and the destructor (if used) must take that name followed by _Dtor.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">SinOsc_Ctor</span><span class="p">(</span><span class="n">SinOsc</span><span class="w"> </span><span class="o">*</span><span class="n">unit</span><span class="p">);</span>
</pre></div>
</div>
<p>The DSP functions should take that name followed by <code class="docutils literal notranslate"><span class="pre">_next</span></code>, plus more text to distinguish the different DSP functions from each other as needed; e.g. audio-rate is postfixed by <code class="docutils literal notranslate"><span class="pre">_a</span></code> and control-rate is postfixed by <code class="docutils literal notranslate"><span class="pre">_k</span></code>. These postfixes might stack up for several parameter/rate combinations:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">SinOsc_next_iak</span><span class="p">(</span><span class="n">SinOsc</span><span class="w"> </span><span class="o">*</span><span class="n">unit</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">inNumSamples</span><span class="p">);</span>
</pre></div>
</div>
<p>Private methods within the plugin files don’t have to follow strict naming but it is recommended to prefix them in a similar fashion, to identify the UGen(s) with which they belong.</p>
</section>
<section id="lambdas">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Lambdas</a><a class="headerlink" href="#lambdas" title="Link to this heading">¶</a></h2>
<p>When writing lambdas, use explicit captures as much as possible. Avoid using <code class="docutils literal notranslate"><span class="pre">[=]</span></code> or <code class="docutils literal notranslate"><span class="pre">[?]</span></code> for the capture list.</p>
</section>
<section id="indentation">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Indentation</a><a class="headerlink" href="#indentation" title="Link to this heading">¶</a></h2>
<p>We use 4-space indentation, same as <a class="reference external" href="https://webkit.org/code-style-guidelines/#indentation-no-tabs">WebKit</a>.</p>
</section>
<section id="line-breaking">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Line breaking</a><a class="headerlink" href="#line-breaking" title="Link to this heading">¶</a></h2>
<p>The formatting tool will automatically wrap lines at 120 characters.</p>
</section>
<section id="whitespace">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Whitespace</a><a class="headerlink" href="#whitespace" title="Link to this heading">¶</a></h2>
<p>Mostly follows <a class="reference external" href="https://webkit.org/code-style-guidelines/#spacing">WebKit</a> guidelines but with a few differences. We always attach the opening brace to the same line as the control statement.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// correct</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">condition</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="p">}</span>

<span class="c1">// incorrect</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">condition</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">}</span>

<span class="c1">// correct</span>
<span class="k">class</span><span class="w"> </span><span class="nc">FooBar</span><span class="w"> </span><span class="p">{</span>
<span class="p">};</span>

<span class="c1">// incorrect</span>
<span class="k">class</span><span class="w"> </span><span class="nc">FooBar</span>
<span class="p">{</span>
<span class="p">};</span>

<span class="c1">// correct</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">doSomethingAwesome</span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">howManyTimes</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="p">}</span>

<span class="c1">// incorrect</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">doSomethingAwesome</span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">howManyTimes</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Function calls that include many arguments are automatically packed by clang-format to wrap at 120 characters.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// correct</span>
<span class="n">doSomething</span><span class="p">(</span><span class="s">&quot;string argument&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">120.5</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;another long string argument&quot;</span><span class="p">);</span>

<span class="c1">// incorrect</span>
<span class="n">doSomething</span><span class="p">(</span><span class="s">&quot;string argument&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="mf">120.5</span><span class="p">,</span>
<span class="w">            </span><span class="s">&quot;another long string argument&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>Constructors should use initializer syntax indented at 4 spaces, but with the colon on definition line and the commas following the initializers, unlike <a class="reference external" href="https://webkit.org/code-style-guidelines/#punctuation-member-init">WebKit</a>.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// correct</span>
<span class="n">Example</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">    </span><span class="n">m_aVariable</span><span class="p">(</span><span class="n">a</span><span class="p">),</span>
<span class="w">    </span><span class="n">m_bVariable</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="p">}</span>

<span class="c1">// incorrect</span>
<span class="n">Example</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">)</span>
<span class="w">    </span><span class="o">:</span><span class="w"> </span><span class="n">m_aVariable</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="w">    </span><span class="p">,</span><span class="w"> </span><span class="n">m_bVariable</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Pointer and reference types should align the * or &amp; to the left with the type, same as in <a class="reference external" href="https://webkit.org/code-style-guidelines/#pointers-cpp">WebKit</a>.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// correct</span>
<span class="kt">int</span><span class="o">*</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">userName</span><span class="p">;</span>

<span class="c1">// incorrect</span>
<span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">a</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">userName</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="o">&amp;</span><span class="n">userName</span><span class="p">;</span>
</pre></div>
</div>
<p>Empty lines at the start of blocks will be automatically removed by clang-format.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// correct</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">foo</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">bazz</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// incorrect</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">foo</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="n">bazz</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="disabling-automatic-formatting">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Disabling automatic formatting</a><a class="headerlink" href="#disabling-automatic-formatting" title="Link to this heading">¶</a></h2>
<p>There may be some situations when the automatic formatting applied to all C++ code will substantially break readability or utility of a certain piece of code. Subject to approval by the code reviewer, it is possible to <a class="reference external" href="https://clang.llvm.org/docs/ClangFormatStyleOptions.html#disabling-formatting-on-a-piece-of-code">disable automatic formatting on code</a> by using special comments.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.svg" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../../index.html">SuperCollider Wiki</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">Contributing</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Development</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../git/index.html">Git</a></li>
<li class="toctree-l2"><a class="reference internal" href="../meetings/index.html">Meetings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../misc/index.html">Miscellaneous dev notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../project-structure/index.html">Project structure</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Code style guidelines</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">C++ style guidelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="Style-Guidelines%3A-SCDocs.html">scdoc style guidelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="Style-Guidelines%3A-SuperCollider.html">sclang style guidelines</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../platforms/index.html">Plattforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releasing/index.html">Releasing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reviewing/index.html">Reviewing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../user/index.html">User resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../community/index.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/index.html">FAQ</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Development</a><ul>
  <li><a href="index.html">Code style guidelines</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Code style guidelines</a></li>
      <li>Next: <a href="cpp-formatting/Cpp-formatting-instructions.html" title="next chapter">C++ formatting instructions</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2024, SuperCollider.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../_sources/development/style/Style-Guidelines:-Cpp.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>