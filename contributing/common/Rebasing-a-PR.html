<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Rebasing a PR &#8212; SuperCollider Wiki  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=4f649999" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=039e1c02" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=7d9986eb" />
    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Reporting bugs, issues and feature requests" href="Reporting-bugs%2C-issues%2C-feature-requests.html" />
    <link rel="prev" title="How to contribute" href="How-to-contribute-to-SuperCollider.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="rebasing-a-pr">
<span id="id1"></span><h1>Rebasing a PR<a class="headerlink" href="#rebasing-a-pr" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="content">
<p class="topic-title">Content</p>
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id3">Introduction</a></p></li>
<li><p><a class="reference internal" href="#rebasing-making-a-clean-merge" id="id4">Rebasing: making a clean merge</a></p></li>
<li><p><a class="reference internal" href="#rebasing-with-a-branch-other-than-develop" id="id5">Rebasing with a branch other than <code class="docutils literal notranslate"><span class="pre">develop</span></code></a></p></li>
<li><p><a class="reference internal" href="#merge-conflicts" id="id6">Merge conflicts</a></p></li>
<li><p><a class="reference internal" href="#completing-a-rebase" id="id7">Completing a rebase</a></p></li>
<li><p><a class="reference internal" href="#rearranging-combining-commits-or-editing-commit-messages-with-rebase" id="id8">Rearranging, combining commits or editing commit messages with <code class="docutils literal notranslate"><span class="pre">rebase</span></code></a></p></li>
<li><p><a class="reference internal" href="#removing-commits-with-rebase" id="id9">Removing commits with <code class="docutils literal notranslate"><span class="pre">rebase</span></code></a></p></li>
</ul>
</nav>
<section id="introduction">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>In the SuperCollider project, the accepted way to resolve merge conflicts in a pull request is by first <em>rebasing</em> onto the target branch, resolving any merge conflicts that arise during that rebase process, before merging of your PR into the target branch. Do not resolve merge conflicts via the GitHub interface or by merging the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch into your local branch. This creates noise in commit history and makes it more difficult to perform other operations on branches later.</p>
<ul class="simple">
<li><p>Tip: See <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">help</span> <span class="pre">rebase</span></code> for usage examples that include helpful graphical representations.</p></li>
<li><p>Tip: Rebase has an interactive mode (<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">rebase</span> <span class="pre">-i</span></code>) which will show exactly which commits will be applied to the new base, and the order in which they will be applied. This can be very helpful when you’re not completely sure what the result of a rebase will be.</p></li>
</ul>
</section>
<section id="rebasing-making-a-clean-merge">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Rebasing: making a clean merge</a><a class="headerlink" href="#rebasing-making-a-clean-merge" title="Link to this heading">¶</a></h2>
<p>Suppose your work branch <code class="docutils literal notranslate"><span class="pre">topic/foo</span></code> was based on the <code class="docutils literal notranslate"><span class="pre">develop</span></code> branch (as is standard practice), and you’re ready to submit a PR. But suppose that since you started your work, the remote upstream<code class="docutils literal notranslate"><span class="pre">develop</span></code> branch has had new commits added to it, leaving your local <code class="docutils literal notranslate"><span class="pre">develop</span></code> (on which <code class="docutils literal notranslate"><span class="pre">topic/foo</span></code> is based) out of date.</p>
<p>To avoid merge conflicts between your changes and the new changes added to the upstream <code class="docutils literal notranslate"><span class="pre">develop</span></code>, you should update your local <code class="docutils literal notranslate"><span class="pre">develop</span></code> branch to reflect the new changes, then <em>rebase</em> your work branch <em>onto</em> <code class="docutils literal notranslate"><span class="pre">develop</span></code> so that your changes are added (”replayed”) <em>after</em> the latest changes to <code class="docutils literal notranslate"><span class="pre">develop</span></code>.</p>
<ol class="arabic simple">
<li><p>First, checkout and pull the latest version of <code class="docutils literal notranslate"><span class="pre">develop</span></code> from the upstream (remote) project to your local repo:</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>checkout<span class="w"> </span>develop<span class="w">       </span><span class="c1"># switch to your local develop branch</span>
git<span class="w"> </span>pull<span class="w"> </span>upstream<span class="w"> </span>develop<span class="w">  </span><span class="c1"># pull in upstream changes from the remote</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Then, rebase. This will also checkout your <code class="docutils literal notranslate"><span class="pre">topic/foo</span></code> branch when you’re done.</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>rebase<span class="w"> </span>develop<span class="w"> </span>topic/foo
</pre></div>
</div>
<p>You may choose to rebase interactively (<code class="docutils literal notranslate"><span class="pre">-i</span></code>) to see which commits will be applied to the new base, and the order in which they will be applied.</p>
<p>[Add a section at the end explaining more about interactive rebase?]</p>
<p>Now skip to <a class="reference internal" href="#completing-a-rebase">Completing a rebase</a> below.</p>
</section>
<section id="rebasing-with-a-branch-other-than-develop">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Rebasing with a branch other than <code class="docutils literal notranslate"><span class="pre">develop</span></code></a><a class="headerlink" href="#rebasing-with-a-branch-other-than-develop" title="Link to this heading">¶</a></h2>
<p>A may reviewer may ask you to rebase your PR onto a main version branch to, for example, expedite your PR getting into a release branch.</p>
<p>If your PR branch <code class="docutils literal notranslate"><span class="pre">topic/foo</span></code> is based on <code class="docutils literal notranslate"><span class="pre">develop</span></code>, you can take the commits unique to your branch and replay them <em>onto</em> the version (e.g. <code class="docutils literal notranslate"><span class="pre">3.13</span></code>) branch instead.</p>
<ol class="arabic simple">
<li><p>First checkout and pull the latest version branch from the upstream (remote) project to your local copy:</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>checkout<span class="w"> </span><span class="m">3</span>.13
git<span class="w"> </span>pull<span class="w"> </span>upstream<span class="w"> </span><span class="m">3</span>.13
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Then, rebase. This will also your <code class="docutils literal notranslate"><span class="pre">topic/foo</span></code> branch checked out when you’re done.</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>rebase<span class="w"> </span>--onto<span class="w"> </span><span class="m">3</span>.12<span class="w"> </span>develop<span class="w"> </span>topic/foo
</pre></div>
</div>
<p>You may choose to rebase interactively (<code class="docutils literal notranslate"><span class="pre">-i</span></code>) to see which commits will be applied to the new base, and the order in which they will be applied.</p>
<p>[Add a section at the end explaining more about interactive rebase?]</p>
<p>Now see <a class="reference internal" href="#completing-a-rebase"><span class="std std-ref">Completing a rebase</span></a> below.</p>
</section>
<section id="merge-conflicts">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Merge conflicts</a><a class="headerlink" href="#merge-conflicts" title="Link to this heading">¶</a></h2>
<p>Before rebasing, git will show you a change list which you can examine to make sure it’s correct before continuing. Git will stop if it encounters a merge conflict, and give instructions on how to resolve it and continue the rebase. You can read more about how to handle this situation <a class="reference external" href="https://docs.github.com/en/github/using-git/resolving-merge-conflicts-after-a-git-rebase">here</a>.</p>
</section>
<section id="completing-a-rebase">
<span id="id2"></span><h2><a class="toc-backref" href="#id7" role="doc-backlink">Completing a rebase</a><a class="headerlink" href="#completing-a-rebase" title="Link to this heading">¶</a></h2>
<p>After rebasing, you may find it helpful to display the pretty-printed commit log with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">log</span> <span class="pre">--oneline</span> <span class="pre">--graph</span> <span class="pre">--decorate</span></code> to make sure all is well.</p>
<p>When done, your local branch will be out of sync with your remote branch. You will have to resolve this by force pushing:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>push<span class="w"> </span>--force<span class="w"> </span>origin<span class="w"> </span>topic/foo
</pre></div>
</div>
<ul class="simple">
<li><p>Tip: You can add the <code class="docutils literal notranslate"><span class="pre">-n/--dry-run</span></code> switch to see what this command will do without actually making any changes.</p></li>
<li><p>Tip: If you realize later that you made a mistake with your rebase, it’s always possible to go back to your previous local state using <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">reflog</span></code>. [ADD EXPLANATORY LINK]</p></li>
</ul>
</section>
<section id="rearranging-combining-commits-or-editing-commit-messages-with-rebase">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Rearranging, combining commits or editing commit messages with <code class="docutils literal notranslate"><span class="pre">rebase</span></code></a><a class="headerlink" href="#rearranging-combining-commits-or-editing-commit-messages-with-rebase" title="Link to this heading">¶</a></h2>
<p>This is not recommended for new git users.</p>
<p>In <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">help</span> <span class="pre">rebase</span></code> you’ll find a section, “Interactive mode”, with extensive documentation on how to reorder and recombine commits.</p>
<p>Also refer to the section on <code class="docutils literal notranslate"><span class="pre">--autosquash</span></code> for ideas on how to combine these features into a streamlined rebase-oriented workflow.</p>
</section>
<section id="removing-commits-with-rebase">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Removing commits with <code class="docutils literal notranslate"><span class="pre">rebase</span></code></a><a class="headerlink" href="#removing-commits-with-rebase" title="Link to this heading">¶</a></h2>
<p><strong>Note: this is an advanced procedure and might result in a messy git state, including lost changes. Consider making a backup copy of the branch before proceeding</strong>.</p>
<p>The general idea is to enter “interactive rebase” mode in git, remove commits that are not desired, resolve conflicts that occur in the process, then <em>force push</em> the local branch to the origin.</p>
<p><strong>Note:  <code class="docutils literal notranslate"><span class="pre">--force</span></code> pushing rewrites the commit history, so this should not be done with branches on which multiple people are collaborating.</strong> (I.e. It’s ok if you’re the only one working on your branch).</p>
<ol class="arabic simple">
<li><p>Make sure you don’t have any uncommitted changes.</p></li>
<li><p>(Optional) Safety measure: make a copy of the current branch (e.g. <code class="docutils literal notranslate"><span class="pre">topic/foo</span></code>):</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>checkout<span class="w"> </span>topic/foo<span class="w">         </span><span class="c1"># your branch</span>
git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>topic/foo-copy<span class="w"> </span><span class="c1"># (optional) backup copy</span>
git<span class="w"> </span>checkout<span class="w"> </span>topic/foo<span class="w">         </span><span class="c1"># go back to your branch</span>
</pre></div>
</div>
<ol class="arabic simple">
<li><p>We’ll want to view all of the commits that we want to edit/remove, <em>plus at least one before that</em>. To do that, we’re going to look at a list of recent commits. For example, let’s list the last 12 commits:</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>log<span class="w"> </span>--oneline<span class="w"> </span>-n<span class="w"> </span><span class="m">12</span><span class="w"> </span>--reverse
</pre></div>
</div>
<p>Make note which commit is <em>one before</em> the commits to be edited.</p>
<ol class="arabic simple">
<li><p>Rebase interactively starting from that commit before the ones to be edited. Here we rebase onto the <em>eleventh</em> commit from the <code class="docutils literal notranslate"><span class="pre">HEAD</span></code> (this assumes we want to make changes to some of the last 10 commits):</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>rebase<span class="w"> </span>-i<span class="w"> </span>HEAD~11
</pre></div>
</div>
<p>Note, you can also rebase onto an older commit, just be careful not to change any of the commits that are not yours in the subsequent steps.</p>
<p>This will open a text editor where you can edit the commit history (<code class="docutils literal notranslate"><span class="pre">vi</span></code> editor by default, here’s a <a class="reference external" href="https://www.atmos.albany.edu/daes/atmclasses/atm350/vi_cheat_sheet.pdf">cheat sheet for vi</a>. You’ll initially be in “command mode”. Pressing <code class="docutils literal notranslate"><span class="pre">i</span></code> enters “input mode”. <code class="docutils literal notranslate"><span class="pre">Esc</span></code> returns to command mode.</p>
<ul class="simple">
<li><p>Lines starting with <code class="docutils literal notranslate"><span class="pre">p</span></code> or <code class="docutils literal notranslate"><span class="pre">pick</span></code> will keep those commits.</p>
<ul>
<li><p>This should be the case for all the commits before the ones you are editing (note that you need to have at least one on top that’s unchanged, before you start removing desired commits).</p></li>
</ul>
</li>
<li><p>To remove the commits, either delete the line with the commit information altogether.</p>
<ul>
<li><p>In command mode, navigate to that line using arrows and press <code class="docutils literal notranslate"><span class="pre">D</span></code> (capital), or enter insert mode (<code class="docutils literal notranslate"><span class="pre">i</span></code>) and change <code class="docutils literal notranslate"><span class="pre">pick</span></code> to <code class="docutils literal notranslate"><span class="pre">drop</span></code> or <code class="docutils literal notranslate"><span class="pre">d</span></code>. Do this for all of the commits you want to remove. Leaving empty lines is OK, they’re ignored.</p></li>
</ul>
</li>
</ul>
<p>The example result will look like this (with different commit SHAs/names):</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>pick ecbd988dab supernova: use the `/error` messages to turn on / off the console printing (#5820)
# &lt;possibly empty, deleted lines&gt;
pick 62c95d7bd6 docs: fix SimpleNumber typo
pick a9d9979056 add additional info about recSampleFormat method options
</pre></div>
</div>
<p>If this looks correct, i.e. if we have at least one unchanged commit at the top and we have properly edited the commit history…</p>
<ol class="arabic simple">
<li><p>Save the changes in <code class="docutils literal notranslate"><span class="pre">vi</span></code> and exit it, which will trigger the rebase.</p>
<ol class="arabic simple">
<li><p>Press <code class="docutils literal notranslate"><span class="pre">Esc</span></code> to make sure you’re in the command mode, then enter <code class="docutils literal notranslate"><span class="pre">:wq</span></code> (write quit) and press enter.</p></li>
</ol>
</li>
</ol>
<p>Git now performs the rebase.</p>
<p>If some of the removed commits operated on the same file as following commits, there might be conflicts that need to be resolved.</p>
<ol class="arabic simple">
<li><p>Check the history again:</p></li>
</ol>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>log<span class="w"> </span>--oneline<span class="w"> </span>-n<span class="w"> </span><span class="m">3</span><span class="w"> </span>--reverse
</pre></div>
</div>
<p>The new history should look like this (for this example):</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>0b51f02ce9 supernova: use the `/error` messages to turn on / off the console printing (#5820)
e6e9a6e5d2 docs: fix SimpleNumber typo
920a3d50df (HEAD -&gt; topic/foo) add additional info about recSampleFormat method options
</pre></div>
</div>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--force</span></code> push the changes to your local branch to the remote branch on GitHub.</p></li>
</ol>
<p>First, double check we are on the right branch:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>status
</pre></div>
</div>
<p>Which should print, among other things, <code class="docutils literal notranslate"><span class="pre">On</span> <span class="pre">branch</span> <span class="pre">topic/foo</span></code>.  Then force push:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>push<span class="w"> </span>-f
</pre></div>
</div>
<p>If all went well, the history of your remote branch on GitHub should now reflect your local revised commit history.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.svg" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../../index.html">SuperCollider Wiki</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Contributing</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Common references</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="Commit-message-format.html">Commit message format</a></li>
<li class="toctree-l3"><a class="reference internal" href="Contributing-Help-files%2C-Tutorials-and-other-SCDocs.html">Contributing help files, Tutorials and other SCDocs</a></li>
<li class="toctree-l3"><a class="reference internal" href="Creating-pull-requests.html">Creating Pull Requests (PRs)</a></li>
<li class="toctree-l3"><a class="reference internal" href="How-to-contribute-to-SuperCollider.html">How to contribute</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Rebasing a PR</a></li>
<li class="toctree-l3"><a class="reference internal" href="Reporting-bugs%2C-issues%2C-feature-requests.html">Reporting bugs, issues and feature requests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../workflow/index.html">Workflows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../The-wiki-wiki.html">The wiki-wiki</a></li>
<li class="toctree-l2"><a class="reference internal" href="../UGen-Quality-Standards.html">UGen-Quality standards</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user/index.html">User resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../community/index.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/index.html">FAQ</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Contributing</a><ul>
  <li><a href="index.html">Common references</a><ul>
      <li>Previous: <a href="How-to-contribute-to-SuperCollider.html" title="previous chapter">How to contribute</a></li>
      <li>Next: <a href="Reporting-bugs%2C-issues%2C-feature-requests.html" title="next chapter">Reporting bugs, issues and feature requests</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2024, SuperCollider.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../_sources/contributing/common/Rebasing-a-PR.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>